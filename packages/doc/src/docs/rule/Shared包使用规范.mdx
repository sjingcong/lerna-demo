---
title: SharedåŒ…ä½¿ç”¨è§„èŒƒ
description: è·¨é¡¹ç›®å…±äº«ä»£ç åŒ…çš„ä½¿ç”¨è§„èŒƒå’Œå¼€å‘çº¦æŸ
version: 1.0.0
tags: ["è§„èŒƒ", "å…±äº«åŒ…", "Monorepo", "ä»£ç å¤ç”¨"]
---

# SharedåŒ…ä½¿ç”¨è§„èŒƒ

`@giom/shared` æ˜¯é¡¹ç›®ä¸­çš„å…±äº«ä»£ç åŒ…ï¼Œâ— **åªèƒ½å­˜æ”¾é¡¹ç›®çº§åˆ«å…±äº«çš„å†…å®¹**ã€‚æœ¬æ–‡æ¡£è§„å®šäº†sharedåŒ…çš„ç›®å½•ç»“æ„ã€å¼•ç”¨æ–¹å¼å’Œå¼€å‘çº¦æŸã€‚

## ğŸ“ åŒ…ç»“æ„æ¦‚è§ˆ

```
packages/shared/
â”œâ”€â”€ package.json              # åŒ…é…ç½®æ–‡ä»¶
â”œâ”€â”€ composables/              # ç»„åˆå¼å‡½æ•°ç›®å½•
â”‚   â”œâ”€â”€ useImagePreload.ts   # å›¾ç‰‡é¢„åŠ è½½Hook
â”‚   â””â”€â”€ usePreload.ts        # æ¨¡å—é¢„åŠ è½½Hook
â”œâ”€â”€ performance/              # æ€§èƒ½ç›‘æ§ç›®å½•
â”‚   â””â”€â”€ webVitals.ts         # Web Vitalsæ€§èƒ½æŒ‡æ ‡
â””â”€â”€ tools/                    # å·¥å…·å‡½æ•°ç›®å½•ï¼ˆå¾…æ‰©å±•ï¼‰
```

## ğŸ“¦ åŒ…ä¿¡æ¯

- **åŒ…å**: `@giom/shared`
- **ç‰ˆæœ¬**: `1.0.0`
- **å…¥å£æ–‡ä»¶**: `index.ts`
- **ç±»å‹å®šä¹‰**: å†…ç½®TypeScriptæ”¯æŒ

## ğŸ¯ ç›®å½•åŠŸèƒ½è¯´æ˜

### ğŸ£ composables/ - ç»„åˆå¼å‡½æ•°

**ç”¨é€”**: å­˜æ”¾Vue 3ç»„åˆå¼å‡½æ•°ï¼Œæä¾›è·¨é¡¹ç›®å¤ç”¨çš„å“åº”å¼é€»è¾‘

**çº¦æŸ**: â— åªèƒ½å­˜æ”¾åœ¨å¤šä¸ªé¡¹ç›®ä¸­éƒ½éœ€è¦ä½¿ç”¨çš„ç»„åˆå¼å‡½æ•°

**å½“å‰æ–‡ä»¶**:
- `useImagePreload.ts` - å›¾ç‰‡é¢„åŠ è½½Hook
- `usePreload.ts` - æ¨¡å—é¢„åŠ è½½Hook

### âš¡ performance/ - æ€§èƒ½ç›‘æ§

**ç”¨é€”**: å­˜æ”¾æ€§èƒ½ç›‘æ§ç›¸å…³çš„å·¥å…·å’Œå‡½æ•°

**çº¦æŸ**: â— åªèƒ½å­˜æ”¾é¡¹ç›®çº§åˆ«çš„æ€§èƒ½ç›‘æ§å·¥å…·

**å½“å‰æ–‡ä»¶**:
- `webVitals.ts` - Web Vitalsæ€§èƒ½æŒ‡æ ‡ç›‘æ§

### ğŸ”§ tools/ - å·¥å…·å‡½æ•°

**ç”¨é€”**: å­˜æ”¾é€šç”¨å·¥å…·å‡½æ•°ï¼Œå¦‚æ—¥æœŸå¤„ç†ã€æ•°æ®æ ¼å¼åŒ–ã€éªŒè¯å‡½æ•°ç­‰

**çº¦æŸ**: â— åªèƒ½å­˜æ”¾åœ¨å¤šä¸ªé¡¹ç›®ä¸­éƒ½éœ€è¦ä½¿ç”¨çš„çº¯å‡½æ•°å·¥å…·

**çŠ¶æ€**: ç›®å½•å·²åˆ›å»ºï¼Œå¾…æ‰©å±•

## ğŸ“‹ å¼•ç”¨æ–¹å¼

### â— æ ‡å‡†å¼•ç”¨æ–¹å¼
```typescript
// âœ… æ¨èï¼šä½¿ç”¨å®Œæ•´è·¯å¾„å¼•ç”¨
import { useImagePreload } from '@giom/shared/composables/useImagePreload'
import { usePreload } from '@giom/shared/composables/usePreload'
import '@giom/shared/performance/webVitals'
```

### â— ç¦æ­¢çš„å¼•ç”¨æ–¹å¼
```typescript
// âŒ ç¦æ­¢ï¼šç›´æ¥å¼•ç”¨åŒ…å
import { usePreload } from '@giom/shared'

// âŒ ç¦æ­¢ï¼šä½¿ç”¨ç›¸å¯¹è·¯å¾„
import { usePreload } from '../../../shared/composables/usePreload'
```

## ğŸ“‹ å¼€å‘çº¦æŸ

### â— å…±äº«åŸåˆ™
**æ ¸å¿ƒçº¦æŸ**: åªæœ‰åœ¨å¤šä¸ªé¡¹ç›®ä¸­éƒ½éœ€è¦ä½¿ç”¨çš„ä»£ç æ‰èƒ½æ”¾å…¥sharedåŒ…

```typescript
// âœ… å¯ä»¥æ”¾å…¥sharedï¼šå¤šé¡¹ç›®å¤ç”¨çš„å·¥å…·
export function formatDate(date: Date): string {
  // æ—¥æœŸæ ¼å¼åŒ–é€»è¾‘
}

// âŒ ä¸èƒ½æ”¾å…¥sharedï¼šå•é¡¹ç›®ç‰¹å®šé€»è¾‘
export function calculateOrderPrice(order: Order): number {
  // è®¢å•ä»·æ ¼è®¡ç®—é€»è¾‘ï¼ˆä¸šåŠ¡ç‰¹å®šï¼‰
}
```

### â— æ–‡ä»¶å‘½åè§„èŒƒ
- **ç»„åˆå¼å‡½æ•°**: ä»¥`use`å¼€å¤´ï¼Œä½¿ç”¨camelCaseå‘½å
- **å·¥å…·å‡½æ•°**: ä½¿ç”¨camelCaseå‘½åï¼Œä½“ç°åŠŸèƒ½
- **ç±»å‹å®šä¹‰**: ä½¿ç”¨PascalCaseå‘½åæ¥å£å’Œç±»å‹

### â— å¯¼å‡ºè§„èŒƒ
```typescript
// âœ… å¿…é¡»ï¼šå‘½åå¯¼å‡º
export function useImagePreload() { /* ... */ }
export interface ImagePreloadOptions { /* ... */ }

// âŒ ç¦æ­¢ï¼šé»˜è®¤å¯¼å‡º
export default function useImagePreload() { /* ... */ }
```

### â— ç±»å‹å®‰å…¨è¦æ±‚
```typescript
// âœ… å¿…é¡»ï¼šæä¾›å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
export interface PreloadModule {
  name: string
  importer: () => Promise<any>
  delay?: number
}

export function usePreload(modules: PreloadModule[]) {
  // å®ç°
}
```

## ğŸš€ æ·»åŠ æ–°å†…å®¹çš„å®¡æ ¸æ ‡å‡†

### â— æ·»åŠ å‰å¿…é¡»ç¡®è®¤

åœ¨å‘sharedåŒ…æ·»åŠ ä»»ä½•å†…å®¹å‰ï¼Œå¿…é¡»ç¡®è®¤ï¼š

1. **å¤šé¡¹ç›®éœ€æ±‚**: æ˜¯å¦åœ¨è‡³å°‘2ä¸ªé¡¹ç›®ä¸­éƒ½éœ€è¦ä½¿ç”¨ï¼Ÿ
2. **é€šç”¨æ€§**: æ˜¯å¦å…·æœ‰è¶³å¤Ÿçš„é€šç”¨æ€§ï¼Œä¸åŒ…å«ç‰¹å®šä¸šåŠ¡é€»è¾‘ï¼Ÿ
3. **ç¨³å®šæ€§**: APIæ˜¯å¦ç¨³å®šï¼Œä¸ä¼šé¢‘ç¹å˜æ›´ï¼Ÿ
4. **ç»´æŠ¤æ€§**: æ˜¯å¦æœ‰æ˜ç¡®çš„ç»´æŠ¤è´£ä»»äººï¼Ÿ

### â— ä¸èƒ½æ”¾å…¥sharedçš„å†…å®¹

```typescript
// âŒ ä¸šåŠ¡ç‰¹å®šé€»è¾‘
export function calculateShippingFee(order: Order): number

// âŒ é¡¹ç›®ç‰¹å®šé…ç½®
export const API_ENDPOINTS = {
  user: '/api/user',
  order: '/api/order'
}

// âŒ å•é¡¹ç›®ä½¿ç”¨çš„ç»„ä»¶
export function useOrderManagement()

// âŒ ç‰¹å®šUIæ¡†æ¶çš„ç»„ä»¶
export function useAntdForm()
```

### â— å¯ä»¥æ”¾å…¥sharedçš„å†…å®¹

```typescript
// âœ… é€šç”¨å·¥å…·å‡½æ•°
export function debounce(fn: Function, delay: number): Function

// âœ… é€šç”¨ç±»å‹å®šä¹‰
export interface ApiResponse<T> {
  code: number
  data: T
  message: string
}

// âœ… é€šç”¨Hook
export function useLocalStorage(key: string)

// âœ… æ€§èƒ½ç›‘æ§å·¥å…·
export function trackPageView(page: string)
```

## âœ… æ ¸å¿ƒåŸåˆ™

**sharedåŒ…çš„æ ¸å¿ƒåŸåˆ™**: â— **åªå­˜æ”¾é¡¹ç›®çº§åˆ«å…±äº«çš„å†…å®¹**

éµå¾ªè¿™ä¸€åŸåˆ™å¯ä»¥ï¼š
- **é¿å…ä»£ç æ±¡æŸ“**: é˜²æ­¢ä¸šåŠ¡ç‰¹å®šä»£ç è¿›å…¥å…±äº«åŒ…
- **æé«˜å¤ç”¨ä»·å€¼**: ç¡®ä¿æ¯ä¸ªåŠŸèƒ½éƒ½æœ‰çœŸå®çš„å¤ç”¨éœ€æ±‚
- **é™ä½ç»´æŠ¤æˆæœ¬**: å‡å°‘ä¸å¿…è¦çš„ä¾èµ–å’Œå¤æ‚æ€§
- **ä¿æŒåŒ…çš„çº¯å‡€**: ç»´æŠ¤sharedåŒ…çš„é€šç”¨æ€§å’Œç¨³å®šæ€§

**è®°ä½**: å®å¯åœ¨å¤šä¸ªé¡¹ç›®ä¸­é‡å¤ç®€å•ä»£ç ï¼Œä¹Ÿä¸è¦å°†éé€šç”¨ä»£ç æ”¾å…¥sharedåŒ…ã€‚